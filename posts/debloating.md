---
layout: post
title: De-bloating
date: February 04, 2021
permalink: /debloating/
---

<style>
    tab1 { padding-left: 4em; }
</style>

<h3 style="color: blue">What is De-bloating?</h3>

<p style="text-align: justify;"><tab1>Many popular Android manufacturers (OEMs) are notoriously famous for modifying the stock android operating system, typically known as Android Open Source Project (AOSP), to incorporate their premium/third-party features. Despite the addition of useful features, this process sometimes introduces a few to several (depends on OEMs) applications, that are likely not in the favorite list of many users. As an example, other than the addition of some excellent applications, such as the Samsung Camera, Samsung’s custom android skin forces their users to live with a number of less-popular applications (not to mention any specific name). These kinds of applications, that are pre-installed on a device by the manufacturer (or carrier in many cases) are generally referred as <b>Bloatware</b>.</tab1></p>

<p style="text-align: justify;"><tab1>Other than eating the precious memory and storage space on a device, some of the bloatware applications are already known or accused for introducing security vulnerabilities. Unfortunately, most of the bloatware are likely included as a system application, and thereby makes it impossible for a normal user to remove it. On the other hand, root access allows one to remove most of the bloatware from an android device. The merits and demerits of gaining root access, which offers an advanced user to take full control over an android device, are discussed, in very detail, in one of our earlier <a href="{{ site.github.url }}/android-rooting/">article</a>. This article will explain various approaches to remove bloatware, a process often referred to as de-bloating, from an android operating system. As an introductory note, it should be noted that none of the methods about to explain in this article wouldn’t work on a non-rooted device.</tab1></p>

<h3 style="color: blue">System Approach?</h3>

<p style="text-align: justify;"><tab1>The methods to remove bloatware from a device shall be generally classified as <b>System</b> and <b>System-less</b> approaches. We will start with the former approach first. In this approach, the bloatware that are usually located in the read-only <b>/system</b> partition (also <b>/vendor</b> and <b>/product</b> partitions in many modern devices) of an android device is permanently removed either on a root shell or by utilizing a third party application (e.g. <a href="{{ site.github.url }}/pm/">Package Manager</a>). If you are someone with basic knowledge in Linux/Bash, the following command shall be executed on a root shell (please make sure to execute “<b>su</b>” before the following command to ensure root access) to uninstall (literally) any system application.</tab1></p>

<h4 style="color: red">pm uninstall –user 0 package_id</h4>

<p style="text-align: justify;"><tab1>where “<b>package_id</b>” is the unique application id of the bloatware you want to remove. Please be aware that the “<b>package_id</b>” of an android application, which looks like a java package name, such as “<b>com.example.bloatware</b>”, is most likely different to that of the application name.</tab1></p>

<p style="text-align: justify;"><tab1>For example, to uninstall Google Chrome from a device using this method, a user needs to execute the following command on a root shell.</tab1></p>

<h4 style="color: red">pm uninstall –user 0 com.android.chrome</h4>

<p style="text-align: justify;"><tab1>Fortunately, the application settings menu on most android skins natively display the "<b>package_id</b>" of an application. Alternatively, executing “<b>pm list packages</b>” or “<b>pm list packages –f</b>” from a bash shell lists the “<b>package_id</b>” (and also the APK path in the latter case) of the entire applications installed on a device.</tab1></p>

<p style="text-align: justify;"><tab1>Don’t want to take this headache? Then, you are free to use one among the many available third party applications to do this task in a much user-friendly manner. The entire process of de-bloating system applications on a third party package management application is as easy as uninstalling a normal user app. For example, the <a href="{{ site.github.url }}/pm/">Package Manager</a>, which is provided by the author of this article, offers a neat and clean user interface listing the entire applications installed on an android device. The application allows the users to categorize the above-mentioned list based on several factors, such as the app type (that is, system or user app), developed by (that is, by specific OEM) etc. The application also allows the one to uninstall unwanted applications either individually or as a batch. As previously mentioned in the article, all of the above-mentioned processes require superuser (su) permissions. As a result, Package Manager requests the same from the user before attempting to conduct any tasks demanding root permissions.</tab1></p>

<h3 style="color: blue">System-less Approach</h3>

<p style="text-align: justify;"><tab1>Now, let’s discuss the “<b>System-less</b>” approach to remove a bloatware. It should be noted that the entire concept of system-less de-bloating is largely related with Magisk, the most popular android rooting solution available at this moment. Other than offering superuser access to an android device, it is not a secret that Magisk is also equipped with an equally useful module management system, that allows root users to modify their read-only system partitions (e.g. <b>/system</b>) in a system-less manner. More clearly, the files or folders placed inside the “<b>system</b>” folder of a module (typically found in “<b>/data/adb/modules/module_id</b>”, where “<b>module_id</b>” is the unique id of a module) will be mounted to the “<b>/system</b>” partition upon booting a Magisk powered device. As a result, the modifications that are achieved via a Magisk module are not at all touching the <b>/system</b> partition directly, and thus considered System-less. More details about Magsik and its module mounting logic are available at the official <a href="https://topjohnwu.github.io/Magisk/guides.html" target="_blank">developers guide</a>.</tab1></p>

<p style="text-align: justify;"><tab1>Now, the question is how the above-explained concept can be used for de-bloating bloatware. As already explained, any files that are placed inside the system folder of a Magisk module will be appended to the system partition. This process will definitely replace any files bearing the same name on the original location, if it exists. As a more realistic example, to de-bloat an apk file located at “<b>/system/priv-app/PackageName/PackageName.apk</b>”, one can create a simple Magisk module and place a dummy file at “<b>/data/adb/modules/module_id/system/priv-app/PackageName/PackageName.apk</b>”. It is also possible to replace the entire folder in a system-less manner with an empty one by simply including an empty file named “<b>.replace</b>” inside the path. For example, including a file at “<b>/data/adb/modules/module_id/system/priv-app/PackageName/.replace</b>” of your Magisk module results in the replacement of the above-mentioned “<b>/system/priv-app/PackageName</b>” folder with an empty one. In addition to the above-mentioned processes, please be noted that setting up a Magisk module requires little more work to be done and are also explained in the <a href="https://topjohnwu.github.io/Magisk/guides.html" target="_blank">official documentation</a>. Alternatively, a Magisk lover can also consider installing Debloater (Terminal Emulator), a module found in the official Magisk Modules Repository, to do the same task. This module allows an advanced user to de-bloat almost all the system application in an interactive terminal view.</tab1></p>

<p style="text-align: justify;"><tab1>Again, are you tired after reading all the command-line stuff? If so, <a href="{{ site.github.url }}/debloater/">De-Bloater</a> is made for you. De-Bloater will handle the above explained command-line process with a single click on a “<b>Remove</b>” icon found right next to each installed package. Unlike the first approach (system approach) that removes the applications permanently, the system-less approach is more safe as it literally doesn’t make any permanent changes on the system partition. Hence, the applications de-bloated by this approach shall be later restored by simply removing the respective file/folder from the module path or the entire module itself in a worst situation.
The De-Bloater application mentioned in the above section also offers one to selectively restore already de-bloated applications in a single click.</tab1></p>

<hr>

<h4>This is a part of an article originally published by <a href="https://play.google.com/store/apps/dev?id=5836199813143882901" target="_blank">sunilpaulmathew</a> on <a href="https://arenaoftech.com/" target="_blank">https://arenaoftech.com/</a>. The original article is available <a href="https://arenaoftech.com/post/de-bloating-heres-everything-you-need-to-know/" target="_blank">here</a>.</h4>